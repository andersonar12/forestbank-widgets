<div>
  <!-- Tools and dependencies -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
    crossorigin="anonymous"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet"
  />

  <!-- Vue.js Library -->
  <script src="https://unpkg.com/vue@2.6.12"></script>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>

  <!-- HTML - Render -->
  <div id="form-marketplace">
    <div class="widget container">
      <div class="row d-flex justify-content-around">
        <div class="col-12 col-md-7">
          <div class="form mb-5">
            <h6 class="text-black">Añade tus datos para recibir el certificado.</h6>

            <!--  <div class="mb-2">
              <label class="form-label">Yo soy Individual</label>
              <select class="form-control form-select">
                <option value="Individual">Individual</option>
                <option value="Empresa">Empresa</option>
              </select>
            </div> -->

            <div class="row mb-2">
              <div class="col">
                <label class="form-label">Nombre Contacto</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col">
                <label class="form-label">Apellidos</label>
                <input type="text" class="form-control" />
              </div>
            </div>

            <div class="row mb-2">
              <div class="col">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" />
              </div>
              <div class="col">
                <label class="form-label">Teléfono</label>
                <input type="text" class="form-control" />
              </div>
            </div>

            <div class="row">
              <div class="col-12 col-sm-6 mb-2">
                <label class="form-label">Nombre de empresa</label>
                <input type="email" class="form-control" />
              </div>
              <div class="col-12 col-sm-6 mb-2">
                <label class="form-label">Seleccione el tamaño de la empresa</label>
                <select class="form-control form-select">
                  <option value="" disabled selected>Seleccione una opción</option>
                  <option value="Pequeña (0-50 empleados)">Pequeña (0-50 empleados)</option>
                  <option value="Mediana (50-200 empleados)">Mediana (50-100 empleados)</option>
                  <option value="Grande (>200 empleados)">Grande (>200 empleados)</option>
                </select>
              </div>
            </div>
            <div class="mb-2">
              <label class="form-label">NIF/CIF</label>
              <input type="text" class="form-control" />
            </div>
            <div class="mb-2">
              <label class="form-label">Direccion, calle, numero </label>
              <input type="text" class="form-control" />
            </div>

            <div class="row mb-2">
              <div class="col">
                <label class="form-label">Codigo Postal</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col">
                <label class="form-label">Pais</label>
                <input type="text" class="form-control" />
              </div>
            </div>
            <div class="row mb-2">
              <div class="col">
                <label class="form-label">Provincia</label>
                <input type="text" class="form-control" />
              </div>
              <div class="col">
                <label class="form-label">Ciudad</label>
                <input type="text" class="form-control" />
              </div>
            </div>

            <div class="mb-2">
              <label class="form-label">Generar certificado en otro idioma</label>
              <select class="form-control form-select">
                <option value="" disabled selected>Seleccione una opción</option>
                <option value="es">Español</option>
                <option value="en">Inglés</option>
              </select>
            </div>
            <div class="mb-2 form-check">
              <input type="checkbox" class="form-check-input" />
              <label class="form-check-label">Aceptar terminos y condiciones</label>
            </div>
            <div class="py-2">
              <button class="btn-co2 btn btn-primary">
                <span>Compensar CO2</span>
              </button>
            </div>
          </div>
        </div>
        <div class="col" style="max-width: 480px">
          <div class="details">
            <div class="item-detail d-flex">
              <img
                src="https://forestbank.es/wp-content/uploads/2022/06/forest-bank-logo.png"
                width="56"
                height="56"
              />

              <div class="ms-3">
                <p class="fw-bolder text-black text-uppercase mb-2">
                  Lorem, ipsum dolor sit amet consectetur adipisicing elit. Culpa nihil excepturi,
                  iure molestiae quidem
                </p>
                <div class="d-flex justify-content-between">
                  <span class="" v-text="itemAmount"></span>
                  <span class="text-black" v-text="subtotal + ' €'"></span>
                </div>
              </div>
            </div>
            <hr />

            <div class="item-detail d-flex justify-content-between mb-2">
              <span>Subtotal</span>
              <span v-text="subtotal + ' €'"></span>
            </div>
            <div class="item-detail d-flex justify-content-between mb-2">
              <span>IVA</span>
              <span v-text="IVA + ' €'"></span>
            </div>
            <hr style="margin-bottom: 35px" />

            <div class="item-detail d-flex justify-content-between mb-3 text-black fw-bolder">
              <span>Total</span>
              <span v-text="total + ' €'"></span>
            </div>

            <div class="py-2">
              <button class="btn-co2 btn btn-primary">
                <span>Compensar CO2</span>
              </button>
            </div>
          </div>

          https://forestbank.es/wp-content/uploads/2024/09/tree.png
          https://forestbank.es/wp-content/uploads/2024/09/car.png
        </div>
      </div>
    </div>
  </div>

  <iframe
    id="myIframe"
    style="
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      width: 100%;
      height: 100%;
      border: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      z-index: 999999;
      display: none;
    "
  ></iframe>

  <!--Logic  -->
  <script>
    // App Principal
    new Vue({
      el: "#form-marketplace",
      name: "form-marketplace",
      data() {
        return {
          price: 100,
          quantity: 1,
        };
      },

      methods: {
        // regexEmail: function (email) {
        //   const regexMail = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
        //   return regexMail.test(email);
        // },
        displayMainFormIframe(params) {
          var iframe = document.getElementById("myIframe");
          iframe.src = `https://form.slothmove.com/${params}`;
          iframe.style.display = "block";

          setTimeout(() => {
            //Iframe Loaded

            window.onmessage = function (e) {
              if (typeof e.data === "string" && JSON.parse(e.data).stripe) {
                top.window.location.href = JSON.parse(e.data).stripe;
                return;
              }
              return;
            };
          }, 1000);
        },
      },
      mounted() {},
      computed: {
        itemAmount() {
          return `${this.price} € x ${this.quantity} tCO2e`;
        },
        subtotal() {
          return this.price * this.quantity;
        },
        IVA() {
          return this.price * this.quantity * 0.21;
        },
        total() {
          return this.price * this.quantity + this.IVA;
        },
      },
      watch: {},
    });
  </script>
  <!--Logic  -->

  <style>
    #form-marketplace {
      font-family: Jost !important;
      font-weight: 400;
      font-style: normal;
      margin: 20px;
      font-size: 15px;
      color: gray;
    }
    #form-marketplace .form {
      box-shadow: 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14),
        0px 1px 3px 0px rgba(0, 0, 0, 0.12);
      border-radius: 8px;
      padding: 24px;
      background-color: white;
    }

    #form-marketplace p {
      margin: 0;
      line-height: 1.4 !important;
    }

    /* #form-marketplace .text-gray {
      color: gray;
    } */

    #form-marketplace .form-control:focus {
      border-color: #04ab52d0 !important;
      box-shadow: 0 0 0 0.1rem rgba(0, 106, 50, 0.693) !important;
    }

    #form-marketplace .btn-co2 {
      width: 200px;
      border-radius: 24px;
      padding: 8px 14px;
    }

    /* Details */

    #form-marketplace .details {
      padding: 24px;
      background-color: white;
      box-shadow: 0 40px 80px rgba(0, 0, 0, 0.08), 0 16px 30px rgba(0, 0, 0, 0.08),
        0 10px 18px rgba(0, 0, 0, 0.08), 0 5px 10px rgba(0, 0, 0, 0.08),
        0 3px 6px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.08) !important;
      border-radius: 8px !important;
      font-size: 16px;
    }

    #form-marketplace .details img {
      box-shadow: 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14),
        0px 1px 3px 0px rgba(0, 0, 0, 0.12);
      border-radius: 8px;
    }
  </style>
</div>
